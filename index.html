<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="منصة المحراب - رحلة إلهام ومعرفة لنشر الخير بأسلوب ملهم وعصري.">
    <meta name="keywords" content="المحراب, منصة إسلامية, بث مباشر, يوتيوب, واتساب, حكم ملهمة, فتوى">
    <meta name="author" content="فريق المحراب">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#1e3a8a">
    <title>المحراب | رحلة الإلهام والخير</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.postimg.cc/GhG5z454/IMG-3129.png">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- HLS.js -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        /* Reset Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }

        body.dark-mode {
            background: #0f172a;
            color: #e2e8f0;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a, #1e3a8a);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            opacity: 1;
            transition: opacity 0.7s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-logo-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 40px;
            animation: pulseLogo 2s ease-in-out infinite;
        }

        .loading-logo {
            width: 100%;
            height: 100%;
            border-radius: 25px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.5);
            opacity: 0;
            animation: fadeInLogo 1s ease forwards;
        }

        @keyframes pulseLogo {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fadeInLogo {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .loading-text {
            font-weight: 700;
            font-size: 2.5rem;
            color: #ffffff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInText 1s ease 0.5s forwards;
        }

        @keyframes fadeInText {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .loading-progress {
            width: 300px;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .loading-progress-bar {
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, #b45309, #ffffff);
            animation: progress 2s ease-in-out 0.5s forwards;
        }

        @keyframes progress {
            0% { width: 0; }
            100% { width: 100%; }
        }

        /* Gradient Background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3a8a, #b45309);
            z-index: -1;
            opacity: 0.3;
        }

        body.dark-mode .gradient-bg {
            background: linear-gradient(135deg, #0f172a, #3b82f6);
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(30, 58, 138, 0.9);
            backdrop-filter: blur(15px);
            padding: 15px 30px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .navbar .logo {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .navbar .logo:hover {
            color: #b45309;
        }

        /* Burger Menu */
        .burger-menu {
            background: transparent;
            border: none;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1002;
        }

        .burger-menu span {
            width: 30px;
            height: 3px;
            background: #ffffff;
            position: relative;
            transition: background 0.3s ease;
        }

        .burger-menu span::before,
        .burger-menu span::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 3px;
            background: #ffffff;
            transition: transform 0.3s ease;
        }

        .burger-menu span::before {
            top: -8px;
        }

        .burger-menu span::after {
            top: 8px;
        }

        .burger-menu.active span {
            background: transparent;
        }

        .burger-menu.active span::before {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .burger-menu.active span::after {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        .burger-menu:hover span,
        .burger-menu:hover span::before,
        .burger-menu:hover span::after {
            background: #b45309;
        }

        /* Sidebar Menu */
        .sidebar {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px;
            z-index: 1001;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 3px solid transparent;
            background-clip: padding-box;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.2);
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -3px;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, #1e3a8a, #b45309);
        }

        body.dark-mode .sidebar::before {
            background: linear-gradient(180deg, #3b82f6, #0f172a);
        }

        .sidebar.active {
            right: 0;
        }

        body.dark-mode .sidebar {
            background: rgba(15, 23, 42, 0.95);
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        body.dark-mode .sidebar-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header img {
            width: 50px;
            height: 50px;
            border-radius: 10px;
        }

        .sidebar-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3a8a;
        }

        body.dark-mode .sidebar-header h2 {
            color: #3b82f6;
        }

        .sidebar-close-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.8rem;
            color: #1e3a8a;
            transition: color 0.3s ease;
        }

        body.dark-mode .sidebar-close-btn {
            color: #3b82f6;
        }

        .sidebar-close-btn:hover {
            color: #b45309;
        }

        body.dark-mode .sidebar-close-btn:hover {
            color: #93c5fd;
        }

        .sidebar ul {
            list-style: none;
            margin-top: 20px;
        }

        .sidebar ul li {
            margin: 20px 0;
            opacity: 0;
            transform: translateX(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .sidebar.active ul li {
            opacity: 1;
            transform: translateX(0);
        }

        .sidebar ul li:nth-child(1) { transition-delay: 0.1s; }
        .sidebar ul li:nth-child(2) { transition-delay: 0.2s; }
        .sidebar ul li:nth-child(3) { transition-delay: 0.3s; }
        .sidebar ul li:nth-child(4) { transition-delay: 0.4s; }
        .sidebar ul li:nth-child(5) { transition-delay: 0.5s; }

        .sidebar ul li a {
            color: #1e293b;
            text-decoration: none;
            font-size: 1.3rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: 10px;
            transition: background 0.3s ease, color 0.3s ease, transform 0.3s ease;
        }

        body.dark-mode .sidebar ul li a {
            color: #e2e8f0;
        }

        .sidebar ul li a:hover {
            background: #1e3a8a;
            color: #ffffff;
            transform: scale(1.05);
        }

        body.dark-mode .sidebar ul li a:hover {
            background: #3b82f6;
        }

        .sidebar ul li a i {
            font-size: 1.4rem;
            transition: transform 0.3s ease;
        }

        .sidebar ul li a:hover i {
            transform: rotate(10deg);
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Theme Toggle */
        .theme-toggle {
            background: #b45309;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .theme-toggle:hover {
            background: #92400e;
        }

        .theme-toggle i {
            font-size: 1.4rem;
            color: #ffffff;
        }

        body.dark-mode .theme-toggle {
            background: #3b82f6;
        }

        body.dark-mode .theme-toggle:hover {
            background: #1d4ed8;
        }

        /* Hero Section */
        .hero {
            max-width: 1200px;
            margin: 100px auto 50px;
            padding: 40px;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .hero {
            background: rgba(15, 23, 42, 0.95);
        }

        .hero img {
            width: 220px;
            height: 220px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .hero img {
            filter: brightness(80%);
        }

        .hero .welcome-text {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
        }

        body.dark-mode .hero .welcome-text {
            color: #60a5fa;
        }

        /* Quote Section */
        .quote-container {
            max-width: 800px;
            margin: 0 auto 20px;
            padding: 20px;
            text-align: center;
        }

        .quote-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 15px;
        }

        .quote-source {
            font-size: 1.2rem;
            color: #475569;
            font-weight: 500;
        }

        body.dark-mode .quote-text {
            color: #60a5fa;
        }

        body.dark-mode .quote-source {
            color: #94a3b8;
        }

        /* Social Links */
        .social-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px auto;
            max-width: 1200px;
            padding: 0 20px;
        }

        .social-links a {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 10px;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background 0.3s ease;
        }

        body.dark-mode .social-links a {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .social-links a:hover {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            transform: scale(1.1);
        }

        body.dark-mode .social-links a:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        .social-links a i {
            font-size: 1.4rem;
        }

        /* Video Section */
        .video-section {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        body.dark-mode .video-section {
            background: rgba(15, 23, 42, 0.95);
        }

        .video-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        body.dark-mode .video-section h2 {
            color: #60a5fa;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Live Stream Section */
        .live-stream-section {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        body.dark-mode .live-stream-section {
            background: rgba(15, 23, 42, 0.95);
        }

        .live-stream-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        body.dark-mode .live-stream-section h2 {
            color: #60a5fa;
        }

        .live-stream-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            background: #ffffff;
            pointer-events: none;
        }

        body.dark-mode .live-stream-container {
            background: #1e293b;
        }

        .live-stream-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
        }

        .live-stream-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: block;
            z-index: 10;
        }

        .live-stream-loading i {
            font-size: 3rem;
            color: #ffffff;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .live-stream-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.95);
        }

        body.dark-mode .live-stream-controls {
            background: rgba(15, 23, 42, 0.95);
        }

        .control-btn {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background 0.3s ease;
        }

        body.dark-mode .control-btn {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .control-btn:hover {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            transform: scale(1.2);
        }

        body.dark-mode .control-btn:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        .control-btn i {
            font-size: 1.6rem;
            color: #ffffff;
        }

        .live-stream-fallback {
            display: none;
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        body.dark-mode .live-stream-fallback {
            background: #1e293b;
        }

        .live-stream-fallback p {
            font-size: 1.2rem;
            color: #475569;
            margin-bottom: 15px;
        }

        body.dark-mode .live-stream-fallback p {
            color: #94a3b8;
        }

        .live-stream-fallback a,
        .retry-btn {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: #ffffff;
            padding: 12px 25px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            margin: 10px 0;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        body.dark-mode .live-stream-fallback a,
        body.dark-mode .retry-btn {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .retry-btn {
            border: none;
            cursor: pointer;
        }

        .live-stream-fallback a:hover,
        .retry-btn:hover {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            transform: scale(1.05);
        }

        body.dark-mode .live-stream-fallback a:hover,
        body.dark-mode .retry-btn:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        /* Quotes Section */
        .quotes-section {
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        body.dark-mode .quotes-section {
            background: rgba(15, 23, 42, 0.95);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .quotes-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        body.dark-mode .quotes-section h2 {
            color: #60a5fa;
        }

        .quotes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 0 20px;
        }

        .quote-card {
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        body.dark-mode .quote-card {
            background: #1e293b;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .quote-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        body.dark-mode .quote-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .quote-card p {
            font-size: 1.2rem;
            color: #1e3a8a;
            margin-bottom: 10px;
        }

        .quote-card span {
            font-size: 1rem;
            color: #64748b;
            font-weight: 500;
        }

        body.dark-mode .quote-card p {
            color: #93c5fd;
        }

        body.dark-mode .quote-card span {
            color: #a5b4fc;
        }

        .quote-card .quote-type {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 0.9rem;
            color: #b45309;
            font-weight: 700;
        }

        body.dark-mode .quote-card .quote-type {
            color: #60a5fa;
        }

        .quote-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .share-btn,
        .details-btn {
            background: linear-gradient(135deg, #b45309, #92400e);
            border: none;
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        body.dark-mode .share-btn {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .details-btn {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
        }

        body.dark-mode .details-btn {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
        }

        .share-btn:hover,
        .details-btn:hover {
            transform: scale(1.1);
        }

        .share-btn:hover {
            background: linear-gradient(135deg, #92400e, #b45309);
        }

        body.dark-mode .share-btn:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        .details-btn:hover {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
        }

        body.dark-mode .details-btn:hover {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
        }

        .share-btn i,
        .details-btn i {
            font-size: 1.2rem;
        }

        /* Stats Section */
        .stats-section {
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        body.dark-mode .stats-section {
            background: rgba(15, 23, 42, 0.95);
        }

        .stats-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        body.dark-mode .stats-section h2 {
            color: #60a5fa;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        body.dark-mode .stat-card {
            background: #1e293b;
        }

        .stat-card:hover {
            transform: translateY(-10px);
        }

        .stat-card h3 {
            font-size: 2rem;
            font-weight: 700;
            color: #b45309;
            margin-bottom: 10px;
        }

        body.dark-mode .stat-card h3 {
            color: #60a5fa;
        }

        .stat-card p {
            font-size: 1.2rem;
            color: #475569;
        }

        body.dark-mode .stat-card p {
            color: #94a3b8;
        }

        /* Comments Section */
        .comments-section {
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        body.dark-mode .comments-section {
            background: rgba(15, 23, 42, 0.95);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .comments-section h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        body.dark-mode .comments-section h2 {
            color: #60a5fa;
        }

        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .comment-form input,
        .comment-form textarea {
            padding: 12px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Tajawal', sans-serif;
            background: #ffffff;
            color: #1e293b;
            resize: vertical;
        }

        body.dark-mode .comment-form input,
        body.dark-mode .comment-form textarea {
            background: #1e293b;
            border-color: #475569;
            color: #e2e8f0;
        }

        .comment-form input:focus,
        .comment-form textarea:focus {
            outline: none;
            border-color: #1e3a8a;
            box-shadow: 0 0 8px rgba(30, 58, 138, 0.3);
        }

        body.dark-mode .comment-form input:focus,
        body.dark-mode .comment-form textarea:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
        }

        .comment-form textarea {
            min-height: 100px;
        }

        .comment-form button {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            border: none;
            color: #ffffff;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        body.dark-mode .comment-form button {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .comment-form button:hover {
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            transform: scale(1.05);
        }

        body.dark-mode .comment-form button:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        .comments-list {
            max-width: 800px;
            margin: 0 auto;
            text-align: right;
        }

        .comment-item {
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        body.dark-mode .comment-item {
            background: #1e293b;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .comment-item:hover {
            transform: translateY(-5px);
        }

        .comment-item h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 10px;
        }

        body.dark-mode .comment-item h3 {
            color: #60a5fa;
        }

        .comment-item p {
            font-size: 1rem;
            color: #475569;
            margin-bottom: 10px;
        }

        body.dark-mode .comment-item p {
            color: #a5b4fc;
        }

        .comment-item span {
            font-size: 0.9rem;
            color: #64748b;
        }

        body.dark-mode .comment-item span {
            color: #94a3b8;
        }

        /* Modal for Fatwa Library and Quote Details */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #ffffff;
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            text-align: right;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-height: 80vh;
            overflow-y: auto;
        }

        body.dark-mode .modal-content {
            background: #1e293b;
        }

        .modal-content h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
            text-align: center;
        }

        body.dark-mode .modal-content h2 {
            color: #60a5fa;
        }

        .modal-content p {
            font-size: 1.2rem;
            color: #475569;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        body.dark-mode .modal-content p {
            color: #a5b4fc;
        }

        .modal-content .close-btn {
            background: linear-gradient(135deg, #b45309, #92400e);
            border: none;
            color: #ffffff;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
            display: block;
            margin: 20px auto 0;
        }

        body.dark-mode .modal-content .close-btn {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .modal-content .close-btn:hover {
            background: linear-gradient(135deg, #92400e, #b45309);
            transform: scale(1.05);
        }

        body.dark-mode .modal-content .close-btn:hover {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
        }

        /* Footer */
        footer {
            background: #1e3a8a;
            color: #ffffff;
            padding: 20px;
            text-align: center;
        }

        body.dark-mode footer {
            background: #1e40af;
        }

        footer p {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        footer a {
            color: #b45309;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }

        body.dark-mode footer a {
            color: #60a5fa;
        }

        footer a:hover {
            color: #ffffff;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: -300px;
            background: #b45309;
            color: #ffffff;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, right 0.3s ease, visibility 0.3s ease;
            z-index: 10003;
            font-size: 1rem;
            font-weight: 500;
        }

        .notification.show {
            opacity: 1;
            visibility: visible;
            right: 20px;
        }

        body.dark-mode .notification {
            background: #3b82f6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar .logo {
                font-size: 2rem;
            }

            .hero {
                margin: 80px auto 40px;
                padding: 20px;
            }

            .hero img {
                width: 180px;
                height: 180px;
            }

            .hero .welcome-text {
                font-size: 1.8rem;
            }

            .quote-container,
            .video-section,
            .live-stream-section,
            .quotes-section,
            .stats-section,
            .comments-section {
                padding: 20px;
            }

            .quote-text {
                font-size: 1.4rem;
            }

            .quote-source {
                font-size: 1rem;
            }

            .sidebar {
                width: 300px;
                right: -300px;
            }

            .sidebar.active {
                right: 0;
            }

            .modal-content {
                max-width: 90%;
                padding: 30px;
            }

            .loading-logo-container {
                width: 150px;
                height: 150px;
            }

            .loading-text {
                font-size: 2rem;
            }

            .loading-progress {
                width: 250px;
            }

            .comment-form {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .hero img {
                width: 140px;
                height: 140px;
            }

            .hero .welcome-text {
                font-size: 1.4rem;
            }

            .quote-text {
                font-size: 1.2rem;
            }

            .quote-source {
                font-size: 0.9rem;
            }

            .social-links a {
                padding: 10px 15px;
                font-size: 1rem;
            }

            .social-links a i {
                font-size: 1.2rem;
            }

            .video-section h2,
            .live-stream-section h2,
            .quotes-section h2,
            .stats-section h2,
            .comments-section h2 {
                font-size: 1.8rem;
            }

            .sidebar {
                width: 260px;
                right: -260px;
            }

            .sidebar.active {
                right: 0;
            }

            .sidebar-header img {
                width: 40px;
                height: 40px;
            }

            .sidebar-header h2 {
                font-size: 1.5rem;
            }

            .sidebar ul li a {
                font-size: 1.2rem;
                padding: 10px 12px;
            }

            .sidebar ul li a i {
                font-size: 1.3rem;
            }

            .modal-content h2 {
                font-size: 1.5rem;
            }

            .modal-content p {
                font-size: 1rem;
            }

            .loading-logo-container {
                width: 120px;
                height: 120px;
            }

            .loading-text {
                font-size: 1.6rem;
            }

            .loading-progress {
                width: 200px;
            }

            .comment-item h3 {
                font-size: 1.1rem;
            }

            .comment-item p {
                font-size: 0.9rem;
            }

            .comment-item span {
                font-size: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-logo-container">
            <img src="https://i.postimg.cc/GhG5z454/IMG-3129.png" alt="شعار المحراب" class="loading-logo">
        </div>
        <div class="loading-text">منصة المحراب: بوابتك للمعرفة والإلهام الإسلامي</div>
        <div class="loading-progress">
            <div class="loading-progress-bar"></div>
        </div>
    </div>

    <!-- Gradient Background -->
    <div class="gradient-bg"></div>

    <!-- Navbar -->
    <nav class="navbar">
        <button class="burger-menu" id="burgerMenu" aria-label="فتح القائمة">
            <span></span>
        </button>
        <a href="#" class="logo">المحراب</a>
        <button class="theme-toggle" aria-label="تبديل الوضع" onclick="toggleTheme()">
            <i class="fas fa-moon"></i>
        </button>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button class="sidebar-close-btn" onclick="closeSidebar()" aria-label="إغلاق القائمة">
            <i class="fas fa-times"></i>
        </button>
        <div class="sidebar-header">
            <img src="https://i.postimg.cc/GhG5z454/IMG-3129.png" alt="شعار المحراب">
            <h2>المحراب</h2>
        </div>
        <ul>
            <li><a href="#hero"><i class="fas fa-home"></i> الرئيسية</a></li>
            <li><a href="#video-section"><i class="fas fa-video"></i> الفيديوهات</a></li>
            <li><a href="#live-stream-section"><i class="fas fa-broadcast-tower"></i> البث المباشر</a></li>
            <li><a href="#quotes-section"><i class="fas fa-quote-right"></i> الاقتباسات</a></li>
            <li><a href="#" onclick="showFatwaModal(); return false;"><i class="fas fa-book"></i> مكتبة الفتوى</a></li>
        </ul>
    </div>
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <img src="https://i.postimg.cc/GhG5z454/IMG-3129.png" alt="شعار المحراب" class="logo-img" loading="lazy">
        <div class="welcome-text">مرحبًا بكم في المحراب</div>
    </section>

    <!-- Quote Section -->
    <div class="quote-container">
        <div class="quote-text" id="quoteText"></div>
        <div class="quote-source" id="quoteSource"></div>
    </div>

    <!-- Social Links -->
    <div class="social-links">
        <a href="https://whatsapp.com/channel/0029VafTNNQ7DAWu5NQP0O3I" target="_blank">
            <i class="fa-brands fa-whatsapp"></i> واتساب
        </a>
        <a href="https://youtube.com/@almihrab.om1?si=iUtB5q2kHfFIrg7G" target="_blank">
            <i class="fa-brands fa-youtube"></i> يوتيوب
        </a>
        <a href="https://www.instagram.com/almihrab.om?igsh=MXJlZHgxdGM5dXAybQ==" target="_blank">
            <i class="fa-brands fa-instagram"></i> إنستغرام
        </a>
        <a href="https://x.com/Oman_male?t=SkFwesWGWVPcXJIBYFDpIA&s=09" target="_blank">
            <i class="fa-brands fa-x-twitter"></i> إكس
        </a>
    </div>

    <!-- Video Section -->
    <section class="video-section" id="video-section">
        <h2>فيديوهات مميزة</h2>
        <div class="video-container">
            <iframe loading="lazy" src="https://www.youtube.com/embed/rIqjxPMMOGs?si=DfAsCpDlesD-wZEn" title="فيديو المحراب" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </section>

    <!-- Live Stream Section -->
    <section class="live-stream-section" id="live-stream-section">
        <h2>البث المباشر - قناة الاستقامة</h2>
        <div class="live-stream-container">
            <video id="liveStreamVideo" muted>
                <source src="https://jmc-live.ercdn.net/alistiqama/alistiqama.m3u8" type="application/x-mpegURL">
            </video>
            <div class="live-stream-loading" id="streamLoading">
                <i class="fas fa-spinner"></i>
            </div>
        </div>
        <div class="live-stream-controls">
            <button class="control-btn" id="playPauseBtn" title="تشغيل/إيقاف مؤقت">
                <i class="fas fa-play"></i>
            </button>
            <button class="control-btn" id="muteBtn" title="إيقاف/تشغيل الصوت">
                <i class="fas fa-volume-up"></i>
            </button>
            <button class="control-btn" id="fullscreenBtn" title="تكبير/تصغير الشاشة">
                <i class="fas fa-expand"></i>
            </button>
            <button class="control-btn" id="refreshBtn" title="إعادة تحميل البث">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
        <div class="live-stream-fallback" id="liveStreamFallback">
            <p>البث المباشر غير متاح حاليًا. قد يكون الرابط معطلًا أو الخادم قيد الصيانة.</p>
            <button class="retry-btn" onclick="retryStream()">إعادة المحاولة</button>
            <p>للحصول على رابط محدث، تواصلوا مع القناة:</p>
            <a href="https://x.com/alistiqamatv" target="_blank">حساب قناة الاستقامة على إكس</a>
        </div>
    </section>

    <!-- Quotes Section -->
    <section class="quotes-section" id="quotes-section">
        <h2>آيات وأحاديث ملهمة</h2>
        <div class="quotes-grid" id="quotesGrid"></div>
        <button id="showMoreQuotes" class="share-btn" style="margin: 20px auto; padding: 12px 30px;">عرض المزيد</button>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <h2>إحصائيات المحراب</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <h3>10000</h3>
                <p>مشاهدات الفيديوهات</p>
            </div>
            <div class="stat-card">
                <h3>5000</h3>
                <p>متابعين</p>
            </div>
            <div class="stat-card">
                <h3>300</h3>
                <p>اقتباسات ملهمة</p>
            </div>
        </div>
    </section>

    <!-- Comments Section -->
    <section class="comments-section" id="comments-section">
        <h2>شاركنا رأيك</h2>
        <form class="comment-form" id="commentForm">
            <input type="text" id="commentName" placeholder="اسمك" required>
            <textarea id="commentText" placeholder="اكتب تعليقك هنا..." required></textarea>
            <button type="submit">إرسال التعليق</button>
        </form>
        <div class="comments-list" id="commentsList"></div>
    </section>

    <!-- Fatwa Modal -->
    <div class="modal" id="fatwaModal">
        <div class="modal-content">
            <h2>مكتبة الفتوى</h2>
            <p>عذرًا، مكتبة الفتوى قيد الصيانة حاليًا. سنعود قريبًا بمحتوى غني ومفيد!</p>
            <button class="close-btn" onclick="closeFatwaModal()">إغلاق</button>
        </div>
    </div>

    <!-- Quote Details Modal -->
    <div class="modal" id="quoteDetailsModal">
        <div class="modal-content">
            <h2 id="quoteDetailsTitle"></h2>
            <p id="quoteDetailsText"></p>
            <button class="close-btn" onclick="closeQuoteDetailsModal()">إغلاق</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>جميع الحقوق محفوظة © 2025 المحراب</p>
        <div>
            <a href="#">سياسة الخصوصية</a>
            <a href="#">اتصل بنا</a>
            <a href="#">عن المحراب</a>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Toggle Theme
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-toggle i');
            body.classList.toggle('dark-mode');
            themeIcon.classList.toggle('fa-moon');
            themeIcon.classList.toggle('fa-sun');
            localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
        }

        // Load Saved Theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-toggle i').classList.replace('fa-moon', 'fa-sun');
            }
        }

        // Show Notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Sidebar Toggle
        const burgerMenu = document.getElementById('burgerMenu');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function toggleSidebar() {
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            burgerMenu.classList.toggle('active');
        }

        function closeSidebar() {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            burgerMenu.classList.remove('active');
        }

        burgerMenu.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        // Fatwa Modal
        function showFatwaModal() {
            document.getElementById('fatwaModal').classList.add('active');
        }

        function closeFatwaModal() {
            document.getElementById('fatwaModal').classList.remove('active');
        }

        // Quote Details Modal
        function showQuoteDetailsModal(title, details) {
            document.getElementById('quoteDetailsTitle').textContent = title;
            document.getElementById('quoteDetailsText').innerHTML = details;
            document.getElementById('quoteDetailsModal').classList.add('active');
        }

        function closeQuoteDetailsModal() {
            document.getElementById('quoteDetailsModal').classList.remove('active');
        }

        // Smooth Scrolling
        function scrollToSection(sectionId) {
            const targetElement = document.getElementById(sectionId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
            }
        }

        document.querySelectorAll('.sidebar ul li a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                if (!this.href.includes('showFatwaModal')) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    scrollToSection(targetId);
                    closeSidebar();
                }
            });
        });

        // Rotating Quotes
        const quotes = [
            {
                type: 'قرآن',
                text: 'إِنَّ مَعَ الْعُسْرِ يُسْرًا',
                source: 'القرآن الكريم - سورة الشرح (94:6)',
                details: 'هذه الآية من سورة الشرح تطمئن المؤمن بأن مع كل صعوبة يأتي الفرج. كرر الله هذه الآية في السورة للتأكيد على أن اليسر يتبع العسر، مما يعزز الأمل والصبر في نفوس المؤمنين.'
            },
            {
                type: 'حديث',
                text: 'من صلى عليّ صلاة واحدة صلى الله عليه عشر صلوات',
                source: 'الرسول صلى الله عليه وسلم - رواه مسلم',
                details: 'هذا الحديث يبين فضل الصلاة على النبي صلى الله عليه وسلم، حيث يضاعف الله الأجر عشر مرات لمن يصلي على النبي، مما يشجع المسلمين على الإكثار من الصلاة عليه.'
            },
            {
                type: 'قرآن',
                text: 'وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا',
                source: 'القرآن الكريم - سورة الطلاق (65:2)',
                details: 'تؤكد هذه الآية أن تقوى الله هي مفتاح الفرج والنجاة من الشدائد. فمن يخاف الله ويتبع أوامره، يجعل الله له مخرجًا من كل ضيق وييسر له أموره.'
            },
            {
                type: 'حديث',
                text: 'إنما الأعمال بالنيات',
                source: 'الرسول صلى الله عليه وسلم - رواه البخاري ومسلم',
                details: 'هذا الحديث العظيم يوضح أن الأعمال تقاس بنياتها. فالنية الصالحة تحول العمل العادي إلى عبادة، وهو من الأحاديث الأساسية التي تبين أهمية الإخلاص في العمل.'
            },
            {
                type: 'قرآن',
                text: 'فَاذْكُرُونِي أَذْكُرْكُمْ',
                source: 'القرآن الكريم - سورة البقرة (2:152)',
                details: 'تدعو هذه الآية المؤمنين إلى ذكر الله، وتعد بأن الله سيذكرهم برحمته وفضله. الذكر يشمل الصلاة، التسبيح، وقراءة القرآن، وهو وسيلة للتقرب إلى الله.'
            },
            {
                type: 'حديث',
                text: 'الدعاء هو العبادة',
                source: 'الرسول صلى الله عليه وسلم - رواه الترمذي',
                details: 'يبين هذا الحديث أن الدعاء هو جوهر العبادة، لأنه يعبر عن افتقار العبد إلى ربه وتوكله عليه. الدعاء يقرب العبد من الله ويفتح أبواب الرحمة.'
            }
        ];

        let currentQuoteIndex = 0;

        function displayQuote() {
            const quoteText = document.getElementById('quoteText');
            const quoteSource = document.getElementById('quoteSource');
            quoteText.textContent = quotes[currentQuoteIndex].text;
            quoteSource.textContent = `- ${quotes[currentQuoteIndex].source}`;
            currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
        }

        setInterval(displayQuote, 10000);
        displayQuote();

        // Quotes Section
        let displayedQuotes = 0;
        const quotesPerPage = 3;

        function displayQuotes() {
            const quotesGrid = document.getElementById('quotesGrid');
            quotesGrid.innerHTML = '';
            const quotesToShow = quotes.slice(0, Math.min(displayedQuotes + quotesPerPage, quotes.length));
            quotesToShow.forEach((quote) => {
                const card = document.createElement('div');
                card.classList.add('quote-card');
                card.innerHTML = `
                    <div class="quote-type">${quote.type}</div>
                    <p>"${quote.text}"</p>
                    <span>- ${quote.source}</span>
                    <div class="quote-buttons">
                        <button class="share-btn" title="مشاركة الاقتباس" onclick="shareQuote(this)">
                            <i class="fas fa-share-alt"></i> مشاركة
                        </button>
                        <button class="details-btn" title="تفاصيل الاقتباس" onclick="showQuoteDetailsModal('${quote.source}', '${quote.details}')">
                            <i class="fas fa-info-circle"></i> تفاصيل
                        </button>
                    </div>
                `;
                quotesGrid.appendChild(card);
            });
            displayedQuotes = quotesToShow.length;
            document.getElementById('showMoreQuotes').style.display = displayedQuotes >= quotes.length ? 'none' : 'block';
        }

        function shareQuote(button) {
            const quoteCard = button.closest('.quote-card');
            const quoteText = quoteCard.querySelector('p').textContent;
            const quoteSource = quoteCard.querySelector('span').textContent;
            const shareText = `🌟 آية أو حديث ملهم 🌟\n${quoteText}\n${quoteSource}\nالمصدر: منصة المحراب`;

            if (navigator.share) {
                navigator.share({
                    title: 'اقتباس من المحراب',
                    text: shareText
                }).then(() => {
                    showNotification('تمت المشاركة بنجاح!');
                }).catch(() => {
                    showNotification('حدث خطأ أثناء المشاركة');
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('تم نسخ الاقتباس إلى الحافظة!');
                }).catch(() => {
                    showNotification('حدث خطأ أثناء النسخ');
                });
            }
        }

        function showMoreQuotes() {
            const quotesGrid = document.getElementById('quotesGrid');
            const quotesToShow = quotes.slice(displayedQuotes, displayedQuotes + quotesPerPage);
            quotesToShow.forEach((quote) => {
                const card = document.createElement('div');
                card.classList.add('quote-card');
                card.innerHTML = `
                    <div class="quote-type">${quote.type}</div>
                    <p>"${quote.text}"</p>
                    <span>- ${quote.source}</span>
                    <div class="quote-buttons">
                        <button class="share-btn" title="مشاركة الاقتباس" onclick="shareQuote(this)">
                            <i class="fas fa-share-alt"></i> مشاركة
                        </button>
                        <button class="details-btn" title="تفاصيل الاقتباس" onclick="showQuoteDetailsModal('${quote.source}', '${quote.details}')">
                            <i class="fas fa-info-circle"></i> تفاصيل
                        </button>
                    </div>
                `;
                quotesGrid.appendChild(card);
            });
            displayedQuotes += quotesToShow.length;
            document.getElementById('showMoreQuotes').style.display = displayedQuotes >= quotes.length ? 'none' : 'block';
        }

        document.getElementById('showMoreQuotes').addEventListener('click', showMoreQuotes);

        // Comments Section
        function loadComments() {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';
            const comments = JSON.parse(localStorage.getItem('comments') || '[]');
            comments.forEach(comment => {
                const commentItem = document.createElement('div');
                commentItem.classList.add('comment-item');
                commentItem.innerHTML = `
                    <h3>${comment.name}</h3>
                    <p>${comment.text}</p>
                    <span>${comment.date}</span>
                `;
                commentsList.appendChild(commentItem);
            });
        }

        function addComment(name, text) {
            const comments = JSON.parse(localStorage.getItem('comments') || '[]');
            const date = new Date().toLocaleString('ar-EG', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            comments.push({ name, text, date });
            localStorage.setItem('comments', JSON.stringify(comments));
            loadComments();
        }

        document.getElementById('commentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('commentName').value.trim();
            const text = document.getElementById('commentText').value.trim();
            if (name && text) {
                addComment(name, text);
                document.getElementById('commentForm').reset();
                showNotification('تم إضافة التعليق بنجاح!');
            } else {
                showNotification('يرجى إدخال الاسم والتعليق');
            }
        });

        // Live Stream Setup
        let hls = null;
        let retryCount = 0;
        const maxRetries = 3;

        function setupLiveStream() {
            const video = document.getElementById('liveStreamVideo');
            const fallback = document.getElementById('liveStreamFallback');
            const loading = document.getElementById('streamLoading');
            const streamUrl = 'https://jmc-live.ercdn.net/alistiqama/alistiqama.m3u8';

            video.style.display = 'none';
            fallback.style.display = 'none';
            loading.style.display = 'block';

            if (Hls.isSupported()) {
                hls = new Hls();
                hls.loadSource(streamUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    retryCount = 0;
                    loading.style.display = 'none';
                    video.style.display = 'block';
                    video.play().catch(() => {
                        handleStreamError();
                    });
                });
                hls.on(Hls.Events.ERROR, (event, data) => {
                    if (data.fatal) {
                        handleStreamError();
                    }
                });
            } else {
                video.style.display = 'none';
                fallback.style.display = 'block';
                loading.style.display = 'none';
                showNotification('المتصفح لا يدعم تنسيق الفيديو');
            }
        }

        function handleStreamError() {
            const video = document.getElementById('liveStreamVideo');
            const fallback = document.getElementById('liveStreamFallback');
            const loading = document.getElementById('streamLoading');
            retryCount++;
            if (retryCount >= maxRetries) {
                video.style.display = 'none';
                fallback.style.display = 'block';
                loading.style.display = 'none';
                showNotification('فشل تحميل البث المباشر بعد عدة محاولات');
            } else {
                setTimeout(() => {
                    if (hls) hls.loadSource('https://jmc-live.ercdn.net/alistiqama/alistiqama.m3u8');
                }, 2000);
            }
        }

        function retryStream() {
            retryCount = 0;
            setupLiveStream();
            showNotification('جارٍ إعادة تحميل البث...');
        }

        // Live Stream Controls
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const refreshBtn = document.getElementById('refreshBtn');
        const video = document.getElementById('liveStreamVideo');

        playPauseBtn.addEventListener('click', () => {
            if (video.paused) {
                video.play();
                playPauseBtn.querySelector('i').classList.replace('fa-play', 'fa-pause');
                showNotification('تم تشغيل البث');
            } else {
                video.pause();
                playPauseBtn.querySelector('i').classList.replace('fa-pause', 'fa-play');
                showNotification('تم إيقاف البث مؤقتًا');
            }
        });

        muteBtn.addEventListener('click', () => {
            video.muted = !video.muted;
            muteBtn.querySelector('i').classList.toggle('fa-volume-up');
            muteBtn.querySelector('i').classList.toggle('fa-volume-mute');
            showNotification(video.muted ? 'تم كتم الصوت' : 'تم تشغيل الصوت');
        });

        fullscreenBtn.addEventListener('click', () => {
            if (document.fullscreenElement) {
                document.exitFullscreen();
                fullscreenBtn.querySelector('i').classList.replace('fa-compress', 'fa-expand');
                showNotification('تم الخروج من وضع ملء الشاشة');
            } else {
                video.parentElement.requestFullscreen();
                fullscreenBtn.querySelector('i').classList.replace('fa-expand', 'fa-compress');
                showNotification('تم تفعيل وضع ملء الشاشة');
            }
        });

        refreshBtn.addEventListener('click', () => {
            retryStream();
        });

        // Initialize on Page Load
        window.addEventListener('load', () => {
            loadTheme();
            setupLiveStream();
            displayQuotes();
            loadComments(); // Load comments on page load
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.add('hidden');
            }, 2500);
        });
    </script>
</body>
</html>